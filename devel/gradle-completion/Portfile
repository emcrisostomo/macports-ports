# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem      1.0
PortGroup       github 1.0

github.setup    gradle gradle-completion 1.6.0 v
revision        0

categories      devel
platforms       any
supported_archs noarch
license         MIT

maintainers     {mascguy @mascguy} \
                openmaintainer

description     Bash and Zsh completion support for Gradle
long_description \
    Bash and Zsh completion support for Gradle. For the former, this port requires \
    Bash >=4.1 and is meant to be used together with the Bash port.

github.tarball_from archive

checksums       rmd160  e7b94da72ff1b96cab6c4e6a890262d36d98fe8e \
                sha256  ae8f8caa79950385ada597bb6d9ba08a3668e04f771bd997b5e6c41c6aec22ea \
                size    147330

depends_run     port:gradle

use_configure   no

set gradle_compdir_bash \
    ${destroot}${prefix}/etc/bash_completion.d
set gradle_compdir_zsh \
    ${destroot}${prefix}/share/zsh/site-functions

set gradle_comp_bash \
    [list \
         gradle-completion.bash \
    ]

set gradle_comp_zsh \
    [list \
         _gradle \
    ]

build {}

pre-destroot {
    xinstall -d ${gradle_compdir_bash}
    xinstall -d ${gradle_compdir_zsh}
}

destroot {
    # Bash completions
    foreach f ${gradle_comp_bash} {
        xinstall -m 644 ${worksrcpath}/${f} \
            ${gradle_compdir_bash}/${f}
    }

    # Zsh completions
    foreach f ${gradle_comp_zsh} {
        xinstall -m 644 ${worksrcpath}/${f} \
            ${gradle_compdir_zsh}/${f}
    }
}
