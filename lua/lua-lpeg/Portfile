# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           luarocks_org 1.0

name                lua-lpeg
epoch               1
version             1.1.0
revision            0
luarocks.rock       lpeg-${version}-2.src.rock
license             MIT
maintainers         {judaew @judaew} openmaintainer

description         Parsing Expression Grammars For Lua
long_description    {*}${description}.

checksums           rmd160  7d2b5d62856f65039c408be7f8b1e2aad8238e07 \
                    sha256  836d315b920a5cdd62e21786c6c9fad547c4faa131d5583ebca64f0b6595ee76 \
                    size    78933

luarocks.worksrcdir lpeg-${version}
luarocks.uploader   gvvaughan

patchfiles          patch-makefile-add-dylib.diff

post-build {
    system -W ${worksrcpath} "make PREFIX=${prefix} LUADIR=${prefix}/include/lua${lua.version} lpeg.dylib"
}

post-destroot {
    xinstall -m 0755 ${worksrcpath}/lpeg.dylib \
        ${destroot}${prefix}/lib/lua/${lua.version}/lpeg.dylib
}
