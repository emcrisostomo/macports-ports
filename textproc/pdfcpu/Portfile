# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           golang 1.0

go.setup            github.com/pdfcpu/pdfcpu 0.11.1 v
set git-commit      c4b560d
# This line is for displaying commit in CLI only
categories          textproc
maintainers         {i0ntempest @i0ntempest} openmaintainer
license             Apache-2

description         PDF processor written in Go
long_description    ${name} is a PDF processing library written in Go supporting encryption.\
                    It provides both an API and a CLI. Supported are all versions up to PDF 1.7 (ISO-32000).\
                    Support for PDF 2.0 is basic and ongoing work.

checksums           ${distname}${extract.suffix} \
                        rmd160  0e4554a25b53bdd240dddcac4eacd4dae42d8843 \
                        sha256  f92a3c0953acf4dc8d6e6c39fa89053f9e506ed1cbb1dcac13ea25ca03da8f03 \
                        size    275769279

go.vendors          gopkg.in/yaml.v2 \
                        lock    v2.4.0 \
                        rmd160  66e9feb7944b3804efa63155ed9b618717b8955c \
                        sha256  72812077e7f20278003de6ab0d85053d89131d64c443f39115a022114fd032b6 \
                        size    73231 \
                    gopkg.in/check.v1 \
                        lock    20d25e280405 \
                        rmd160  412aa0d109919182ff84259e9b5bbc9f24d78117 \
                        sha256  233f8faf427ce6701ac3427f85c28bc6b6ae7cdc97a303a52873c69999223325 \
                        size    30360 \
                    golang.org/x/text \
                        lock    v0.30.0 \
                        rmd160  ac0fe31ef29a96cedf759c840a04058dce249d4f \
                        sha256  a8811d6ffc939356c77a5caa8b577f9700d9861bce7814977da7b94456ac997a \
                        size    8970063 \
                    golang.org/x/image \
                        lock    v0.32.0 \
                        rmd160  5b4f8d0f33cd550c3fb4af9d9f5602956a025fe5 \
                        sha256  64a486be11fb30d24abfc92cc10951fd69e51e238da08eac4bf840ce9397c1e4 \
                        size    5111447 \
                    golang.org/x/crypto \
                        lock    v0.43.0 \
                        rmd160  22580511abe40d45b37d949254b760100c731752 \
                        sha256  834091eadbcb351649f5940b107c7978507907b55e0cb29ba95824b85d0dcc50 \
                        size    2161856 \
                    github.com/pkg/errors \
                        lock    v0.9.1 \
                        rmd160  dc065c655f8a24c6519b58f9d1202eb266ecda40 \
                        sha256  208d21a7da574026f68a8c9818fa7c6ede1b514ef9e72dc733b496ddcb7792a6 \
                        size    13422 \
                    github.com/mattn/go-runewidth \
                        lock    v0.0.19 \
                        rmd160  b0f62e2f1c2086189f2ed14ad635733c4e5ced56 \
                        sha256  6f5a00cdfbf4d88d05406a07bb95c34dc0abc2f65f15e9c5ca35814f4008b82f \
                        size    20550 \
                    github.com/hhrutter/tiff \
                        lock    v1.0.2 \
                        rmd160  bbbffb155321a540058266f8a3a81dc9d040e811 \
                        sha256  a82ab19cde42d03912eb29c62d1721bf4bc476ffe26e2e510d17f2a1c7be2114 \
                        size    2635932 \
                    github.com/hhrutter/pkcs7 \
                        lock    v0.2.0 \
                        rmd160  7f7982885cbb7a7ef48e4dbeb0eb0396fbf51954 \
                        sha256  63238f385bb593c6f5f3939cc2cc6d5bf36fd7cdb00d2e05313162594c64b2cc \
                        size    48716 \
                    github.com/hhrutter/lzw \
                        lock    v1.0.0 \
                        rmd160  2916d27037fff1db7bcc18d2804af56bc9043195 \
                        sha256  868d5c4b864c5f47c709d4489e61ddfd1c163849670048adb17e14ee2960dd29 \
                        size    54055 \
                    github.com/clipperhouse/uax29 \
                        lock    v2.2.0 \
                        rmd160  9d56b6ecadc9b977922cf1a9763f1c4a8496f995 \
                        sha256  dd907ccd83af2897b812f34920729d88c31809ea5526973978f4eab7b80b5237 \
                        size    279573

# Notes for updating this port:
# Remember to update git commit hash

set time [clock format [clock seconds] -format "%Y-%m-%dT%H:%M:%S%Z"]
build.args-append   -ldflags=\"-X main.version=${version} -X main.commit=${git-commit} \
                    -X github.com/pdfcpu/pdfcpu/pkg/pdfcpu.VersionStr=${version} -X main.date=${time}\" \
                    -o ./${name} ./cmd/${name}

destroot {
    xinstall -m 0755 ${worksrcpath}/${name} ${destroot}${prefix}/bin/
}
